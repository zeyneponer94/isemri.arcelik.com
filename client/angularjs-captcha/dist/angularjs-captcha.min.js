!function(a){"use strict";function b(){var b={},c={captchaEndpoint:""};return{setSettings:function(a){b=a},$get:function(){return a.extend(c,b),c.captchaEndpoint=c.captchaEndpoint.replace(/\/+$/g,""),c}}}function c(a,b,c){return{getScript:function(b,c){a({method:"GET",url:b}).then(function(a){new Function(a.data)(),"function"==typeof c&&c()},function(a){throw new Error(a.data)})},loadScriptIncludes:function(a){var d=c.captchaEndpoint+"?get=script-include",e=this;this.getScript(d,function(){var d=a[0].querySelector("#BDC_VCID_"+b.captchaStyleName).value,f=c.captchaEndpoint+"?get=init-script-include&c="+b.captchaStyleName+"&t="+d+"&cs=200";e.getScript(f)})}}}function d(a,b,c,d){return{restrict:"E",link:function(e,f,g){var h=g.stylename?g.stylename:"defaultCaptcha";a.captchaStyleName=h,b({method:"GET",url:c.captchaEndpoint,params:{get:"html",c:h}}).then(function(a){f.html(a.data.replace(/<script.*<\/script>/g,"")),d.loadScriptIncludes(f)},function(a){throw new Error(a.data)})}}}function e(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f,g,h=e;h.$setValidity("incorrectCaptcha",!1),c.bind("blur",function(){(g=c.val())&&(f||(f=new a),f.validate(g).then(function(a){a?h.$setValidity("incorrectCaptcha",!0):(h.$setValidity("incorrectCaptcha",!1),f.reloadImage())}))})}}}function f(a,b){var c=function(){if(void 0===window.botdetect)throw new Error('Can not create Captcha instance, please put "new Captcha()" inside function that will be invoked after form is submitted.');this.captchaStyleName=a.captchaStyleName,this.captchaId=c.getInstance().captchaId};return c.getInstance=function(){return a.captchaStyleName?window.botdetect.getInstanceByStyleName(a.captchaStyleName):null},c.prototype.validate=function(a){return b({method:"GET",url:c.getInstance().validationUrl,params:{i:a}}).then(function(a){return a.data},function(a){return a.data})},c.prototype.reloadImage=function(){c.getInstance().reloadImage()},c}a.module("BotDetectCaptcha",[]).provider("captchaSettings",b).factory("captchaHelper",["$http","$rootScope","captchaSettings",c]).factory("Captcha",["$rootScope","$http",f]).directive("botdetectCaptcha",["$rootScope","$http","captchaSettings","captchaHelper",d]).directive("correctCaptcha",["Captcha",e])}(window.angular);
//# sourceMappingURL=angularjs-captcha.min.js.map